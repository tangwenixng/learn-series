## 引入依赖

```xml
<dependency>
    <groupId>org.apache.rocketmq</groupId>
    <artifactId>rocketmq-client</artifactId>
    <version>4.9.0</version>
</dependency>
```

## 生产者示例

```java
public class BaseProducer {
    public static void main(String[] args) {
        DefaultMQProducer producer = new DefaultMQProducer("test-group");
        //设置发送超时时间
        producer.setSendMsgTimeout(8000);
        //设置NameServer地址
        producer.setNamesrvAddr("localhost:9876");
        try {
            //启动
            producer.start();
            //创建消息：参数1-topic名称 参数2-tag名称 参数3-消息内容(byte[])
            Message message = new Message("topic1", "tag1", LocalDateTime.now().toString().getBytes());
            try {
                //发送
                producer.send(message);
                System.out.println("Message sent successfully.");
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                producer.shutdown();
            }
        } catch (MQClientException e) {
            e.printStackTrace();
        }
    }
}
```

## 消费者示例

### 推模式

服务器有消息后主动推送至客户端

```java
public class BasePushConsumer {
    public static void main(String[] args) throws Exception {
        // 创建一个消费者实例,需要指定消费者组
        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer("consumer_group");
        // 设置Name Server地址
        consumer.setNamesrvAddr("localhost:9876");
        // 订阅Topic和Tag
        consumer.subscribe("topic1", "*");
        // 注册消息监听器
        consumer.registerMessageListener((MessageListenerConcurrently) (msgs, context) -> {
            for (MessageExt msg : msgs) {
                // 处理接收到的消息
                System.out.println("Received message: " + new String(msg.getBody()));
            }
            return ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });
        // 启动消费者
        consumer.start();

        System.out.println("Consumer started.");
    }
}
```

### 拉模式

类似于kafka的poll,即轮询拉取

```java
public class BasePullConsumer {
    public static void main(String[] args) throws Exception {
        // 创建一个消费者实例,需要指定消费者组
        DefaultLitePullConsumer consumer = new DefaultLitePullConsumer("consumer_group");
        // 设置Name Server地址
        consumer.setNamesrvAddr("localhost:9876");

        // 订阅主题和标签
        consumer.subscribe("topic1", "*");

        // 启动消费者
        consumer.start();

        // 拉取消息
        while (true) {
            List<MessageExt> messages = consumer.poll(1000);
            for (MessageExt message : messages) {
                // 处理接收到的消息
                System.out.println("BasePull message: " + new String(message.getBody()));
            }
        }
    }
}
```

仓库地址: [RocketMQ-Java客户端示例](https://github.com/tangwenixng/learn-series/tree/master/learn-rocketmq/src/main/java/com/twx/learn/rocketmq/base)



